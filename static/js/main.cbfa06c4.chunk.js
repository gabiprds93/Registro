(this.webpackJsonpregistro=this.webpackJsonpregistro||[]).push([[0],{149:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(31),c=n.n(o),i=(n(68),n(62)),s=n(2),l=n(19),u=(n(72),n(15)),m=n(57),p=n(151),d=n(16),E={isFetching:!1,registryResponse:void 0,errors:void 0};var f=Object(u.c)({form:p.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTRY_REQUEST":return Object.assign({},e,{isFetching:!0,registryResponse:""});case"USER_REGISTRY_SUCCESS":return Object.assign({},e,{isFetching:!1,registryResponse:t.response});case"USER_REGISTRY_FAILURE":return Object.assign({},e,{isFetching:!1,errors:t.errors});case"USER_LOGIN_REQUEST":return Object.assign({},e,{isFetching:!0,loginResponse:""});case"USER_LOGIN_SUCCESS":return Object.assign({},e,{isFetching:!1,loginResponse:t.response});case"USER_LOGIN_FAILURE":return Object.assign({},e,{isFetching:!1,errors:t.errors});default:return e}}}),b=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,g=Object(u.e)(f,b(Object(u.a)(m.a))),h=n(8),y=n(36),v=function(e){var t=e.label,n=e.type,a=e.field;return r.a.createElement("label",{className:"form-label"},t,"textarea"===n?r.a.createElement("textarea",Object.assign({className:"form-input"},a)):r.a.createElement("input",Object.assign({className:"form-input",type:n},a)))},R=function(e){var t=e.label,n=e.form,a=e.field;return r.a.createElement("label",{className:"form-label"},t,r.a.createElement("input",Object.assign({className:"form-input",type:"text"},a,{onChange:function(e){var t=e.target,a=t.name,r=t.value;new RegExp("^[0-9]{0,9}$").test(r)&&n.setFieldValue(a,r)}})))},S=function(e){var t=e.label,n=e.type,a=e.field,o=e.form;return r.a.createElement("div",{className:"form-label"},t,r.a.createElement("div",{className:"file-upload"},r.a.createElement("label",{className:"form-input"},r.a.createElement("span",{id:"info"},"Seleccionar archivo"),r.a.createElement("input",Object.assign({id:"input-file",type:n},a,{onChange:function(){var e=document.getElementById("input-file").files[0].name;document.getElementById("info").innerHTML=e}}))),r.a.createElement("button",{className:"background-green",type:"button",onClick:function(){o.setFieldValue("wichButton","uploadButton"),o.handleSubmit()}},"Cargar")))},_=function(e){var t=e.type,n=(e.options,Object(y.a)(e,["type","options"]));switch(t){case"phone":return r.a.createElement(R,n);case"file":return r.a.createElement(S,Object.assign({type:t},n));default:return r.a.createElement(v,Object.assign({type:t},n))}},N=function(e){e.sizes,e.styles;var t=Object(y.a)(e,["sizes","styles"]);return r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement(_,t),r.a.createElement(h.a,{name:t.field.name},(function(e){return r.a.createElement("span",{className:"message"},e)})))},O=[{label:"Nombre de la tienda o persona",type:"text",name:"nombre"},{label:"Descripci\xf3n de la tienda o persona",type:"textarea",name:"descripcion"},{label:"Nombre de contacto",type:"text",name:"nombree"},{label:"DNI",type:"text",name:"dni"},{label:"Correo",type:"email",name:"correo"},{label:"Celular de contacto",type:"phone",name:"celular"},{label:"URL Facebook",type:"text",name:"url"}],U=[{label:"Usuario",type:"text",name:"username"},{label:"Contrase\xf1a",type:"password",name:"clave"},{label:"Confirmar contrase\xf1a",type:"password",name:"confirmPassword"},{label:"Agregar archivos",type:"file",name:"addFiles"}],I=[{label:"Usuario",type:"text",name:"username"},{label:"Contrase\xf1a",type:"password",name:"clave"}],j=function(e){var t={};return e.nombre||(t.nombre="Requerido"),e.descripcion||(t.descripcion="Requerido"),e.correo?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.correo)||(t.correo="Correo inv\xe1lido"):t.correo="Requerido",e.celular||(t.celular="Requerido"),e.username||(t.username="Requerido"),e.clave||(t.clave="Requerido"),t},F=function(e){var t={};return e.username||(t.username="Requerido"),e.clave||(t.clave="Requerido"),t},w={idusuario:"",dni:"",nombre:"",descripcion:"",nombree:"",celular:"",correo:"",url:"",username:"",clave:"",mov_usu:"N",wichButton:""},C={username:"",clave:""},L={fetchUserRegistry:function(e){return function(t){return t({type:"USER_REGISTRY_REQUEST"}),fetch("https://moliemprendedor.munimolina.gob.pe/adm_emprendedor1.php",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"USER_REGISTRY_SUCCESS",response:Object(d.a)({},e)}}(e))})).catch((function(e){t(function(e){return{type:"USER_REGISTRY_FAILURE",errors:Object(d.a)({},e)}}(e.message))}))}},fetchFileUpload:function(e){return function(t){return t({type:"FILE_UPLOAD_REQUEST"}),fetch("https://moliemprendedor.munimolina.gob.pe/subirarchivos.php",{method:"PUT",body:e}).then((function(e){return e.json()})).then((function(e){return t(function(e){return Object(d.a)({type:"FILE_UPLOAD_SUCCESS"},e)}(e))})).catch((function(e){t(function(e){return Object(d.a)({type:"FILE_UPLOAD_FAILURE"},e)}(e.message))}))}}},x=Object(l.b)((function(e){return e}),L)((function(e){var t=e.fetchUserRegistry,n=e.fetchFileUpload,a=e.history;return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h2",{className:"title"},"Registro"),r.a.createElement("h3",{className:"subtitle"},"Ingresa los datos solicitados para formar parte de nuestros distribuidores.")),r.a.createElement(h.d,{initialValues:w,onSubmit:function(e){if("uploadButton"===e.wichButton){var r=new FormData,o=document.querySelector("input[type='file']");r.append("file",o.files[0]),n(r).then((function(e){console.log("success")}))}else{var c=document.getElementById("formElement"),i=new FormData(c);i.append("idusuario",""),i.append("mov_usu","N"),i.delete("confirmPassword"),i.delete("addFiles"),t(i).then((function(){a.push("/login")}))}},validate:j},(function(e){var t=e.resetForm,n=e.handleSubmit,a=e.setFieldValue;return r.a.createElement(h.c,{className:"form",id:"formElement"},r.a.createElement("h3",{className:"section-text"},"Datos del Emprendedor"),O.map((function(e,t){return r.a.createElement(h.b,{key:t,type:e.type,name:e.name,label:e.label,component:N})})),r.a.createElement("h3",{className:"section-text"},"Datos de acceso"),U.map((function(e,t){return r.a.createElement(h.b,{key:t,type:e.type,name:e.name,label:e.label,component:N})})),r.a.createElement("span",{className:"form-label"},r.a.createElement(h.b,{type:"checkbox",name:"termns"}),"Autorizo y Acepto que la Municipalidad de La Molina me notifique los actos administrativos que pudiera emitir a consecuencia de la presente solicitud y/0 procedimiento administrativo al correo electr\xf3nico."),r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{className:"background-red",type:"button",onClick:function(){return t(w)}},"Cancelar"),r.a.createElement("button",{className:"background-green",type:"button",onClick:function(){a("wichButton","sendButton"),n()}},"Enviar")))})))})),T={fetchUserLogin:function(e){return function(t){return t({type:"USER_LOGIN_REQUEST"}),fetch("https://moliemprendedor.munimolina.gob.pe/adm_login_usuario1.php",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"USER_LOGIN_SUCCESS",response:Object(d.a)({},e)}}(e))})).catch((function(e){t(function(e){return Object(d.a)({type:"USER_LOGIN_FAILURE"},e)}(e.message))}))}}},k=Object(l.b)((function(e){return e}),T)((function(e){var t=e.fetchUserLogin;return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h2",{className:"title"},"Mi cuenta"),r.a.createElement("h3",{className:"subtitle"},"Ingresa con tu cuenta para hacer uso de la Plataforma Digital MoliEmprendedor.")),r.a.createElement(h.d,{initialValues:C,onSubmit:function(e,n){!function(e,n){var a=document.getElementById("formLogin"),r=new FormData(a);t(r).then((function(e){e.response&&e.response[0]&&n.setErrors({general:e.response[0].COD_MENSAJE})}))}(0,n)},validate:F},(function(e){var t=e.errors;return r.a.createElement(h.c,{className:"form",id:"formLogin"},I.map((function(e,t){return r.a.createElement(h.b,{key:t,type:e.type,name:e.name,label:e.label,component:N})})),t.general&&r.a.createElement("p",{className:"message"},t.general),r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{className:"background-green",type:"submit"},"Ingresar")))})))}));var A=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(l.a,{store:g},r.a.createElement(i.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:x}),r.a.createElement(s.a,{path:"/login",component:k})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,n){e.exports=n(149)},68:function(e,t,n){},72:function(e,t,n){}},[[63,1,2]]]);
//# sourceMappingURL=main.cbfa06c4.chunk.js.map