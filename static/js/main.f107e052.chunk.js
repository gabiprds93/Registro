(this.webpackJsonpregistro=this.webpackJsonpregistro||[]).push([[0],{177:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),s=a.n(o),c=(a(79),a(72)),i=a(4),l=a(17),u=(a(83),a(19)),m=a(66),d=a(180),p=a(14),E={isFetching:!1,registryResponse:void 0,errors:void 0};var f=Object(u.c)({form:d.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTRY_REQUEST":return Object.assign({},e,{isFetching:!0,registryResponse:""});case"USER_REGISTRY_SUCCESS":return Object.assign({},e,{isFetching:!1,registryResponse:t.response});case"USER_REGISTRY_FAILURE":return Object.assign({},e,{isFetching:!1,errors:t.errors});case"USER_LOGIN_REQUEST":return Object.assign({},e,{isFetching:!0,loginResponse:""});case"USER_LOGIN_SUCCESS":return Object.assign({},e,{isFetching:!1,loginResponse:t.response});case"USER_LOGIN_FAILURE":return Object.assign({},e,{isFetching:!1,errors:t.errors});case"GET_USERS_REQUEST":return Object.assign({},e,{isFetching:!0,listUsers:""});case"GET_USERS_SUCCESS":return Object.assign({},e,{isFetching:!1,listUsers:t.response});case"GET_USERS_FAILURE":return Object.assign({},e,{isFetching:!1,errors:t.errors});default:return e}}}),b=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,g=Object(u.e)(f,b(Object(u.a)(m.a))),h=a(10),R=a(41),y=function(e){var t=e.label,a=e.type,n=e.field;return r.a.createElement("label",{className:"form-label"},t,"textarea"===a?r.a.createElement("textarea",Object.assign({className:"form-input"},n)):r.a.createElement("input",Object.assign({className:"form-input",type:a},n)))},S=function(e){var t=e.label,a=e.form,n=e.field,o=e.regularExp;return r.a.createElement("label",{className:"form-label"},t,r.a.createElement("input",Object.assign({className:"form-input",type:"text"},n,{onChange:function(e){var t=e.target,n=t.name,r=t.value;new RegExp(o).test(r)&&a.setFieldValue(n,r)}})))},O=a(73),v=function(e){var t=e.label,a=e.type,n=e.field,o=r.a.useState([{name:"Seleccionar archivo"}]),s=Object(O.a)(o,2),c=s[0],i=s[1];return r.a.createElement("div",{className:"form-label"},t,r.a.createElement("div",{className:"file-upload"},r.a.createElement("label",null,r.a.createElement("div",{className:"form-input"},c.map((function(e,t){return r.a.createElement("span",{key:t,id:"info"},e.name)}))),r.a.createElement("input",Object.assign({id:"input-file",type:a},n,{onChange:function(e){for(var t=e.target.files,a=[],n=0;n<t.length;n++)a.push({name:t[n].name});t.length&&i(a)},multiple:!0})),r.a.createElement("div",{className:"btn background-green"},"Cargar"))))},U=a(71),N=a.n(U),_=function(e){var t=e.label,a=e.form,n=e.field;r.a.useEffect((function(){n.value||a.setFieldValue(n.name,new Date)}),[]);return r.a.createElement("label",{className:"form-label"},t,r.a.createElement(N.a,Object.assign({className:"form-input"},n,{onChange:function(e){a.setFieldValue(n.name,e)}})))},C=function(e){var t=e.type,a=(e.options,Object(R.a)(e,["type","options"]));switch(t){case"number":return r.a.createElement(S,a);case"file":return r.a.createElement(v,Object.assign({type:t},a));case"date":return r.a.createElement(_,a);default:return r.a.createElement(y,Object.assign({type:t},a))}},j=function(e){e.sizes,e.styles;var t=Object(R.a)(e,["sizes","styles"]);return r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement(C,t),r.a.createElement(h.a,{name:t.field.name},(function(e){return r.a.createElement("span",{className:"message"},e)})))},I=[{label:"Nombre de la tienda o persona",type:"text",name:"nombre"},{label:"Descripci\xf3n de la tienda o persona",type:"textarea",name:"descripcion"},{label:"Nombre de contacto",type:"text",name:"nombree"},{label:"DNI",type:"number",name:"dni",regularExp:"^[0-9]{0,8}$"},{label:"Correo",type:"email",name:"correo"},{label:"Fecha de Nacimiento",type:"date",name:"fechanac"},{label:"Celular de contacto",type:"number",name:"celular",regularExp:"^[0-9]{0,9}$"},{label:"URL Facebook",type:"text",name:"url"}],F=[{label:"Usuario",type:"text",name:"username"},{label:"Contrase\xf1a",type:"password",name:"clave"},{label:"Confirmar contrase\xf1a",type:"password",name:"confirmPassword"},{label:"Agregar archivos",type:"file",name:"addFiles"}],L=[{label:"Usuario",type:"text",name:"username"},{label:"Contrase\xf1a",type:"password",name:"clave"}],T=function(e){var t={};return e.nombre||(t.nombre="Requerido"),e.descripcion||(t.descripcion="Requerido"),e.correo?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.correo)||(t.correo="Correo inv\xe1lido"):t.correo="Requerido",e.celular||(t.celular="Requerido"),e.username||(t.username="Requerido"),e.clave||(t.clave="Requerido"),e.confirmPassword||(t.confirmPassword="Requerido"),e.clave!==e.confirmPassword&&(t.confirmPassword="Las contrase\xf1as no coinciden"),e.termns||(t.termns="Requerido"),t},A=function(e){var t={};return e.username||(t.username="Requerido"),e.clave||(t.clave="Requerido"),t},w={idusuario:"",dni:"",nombre:"",descripcion:"",nombree:"",fechanac:"",celular:"",correo:"",url:"",username:"",clave:"",confirmPassword:"",termns:!1,mov_usu:"N",wichButton:""},P={username:"",clave:""},G={fetchUserRegistry:function(e){return function(t){return t({type:"USER_REGISTRY_REQUEST"}),fetch("https://moliemprendedor.munimolina.gob.pe/adm_emprendedor1.php",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"USER_REGISTRY_SUCCESS",response:Object(p.a)({},e)}}(e))})).catch((function(e){t(function(e){return{type:"USER_REGISTRY_FAILURE",errors:Object(p.a)({},e)}}(e.message))}))}},fetchFileUpload:function(e){return function(t){return t({type:"FILE_UPLOAD_REQUEST"}),fetch("https://moliemprendedor.munimolina.gob.pe/Controlador/subirarchivos1.php",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){return t(function(e){return Object(p.a)({type:"FILE_UPLOAD_SUCCESS"},e)}(e))})).catch((function(e){t(function(e){return Object(p.a)({type:"FILE_UPLOAD_FAILURE"},e)}(e.message))}))}}},D=Object(l.b)((function(e){return e}),G)((function(e){var t=e.fetchUserRegistry,a=e.fetchFileUpload,n=e.history;return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h2",{className:"title"},"Registro"),r.a.createElement("h3",{className:"subtitle"},"Ingresa los datos solicitados para formar parte de nuestros distribuidores.")),r.a.createElement(h.d,{initialValues:w,onSubmit:function(){var e=document.getElementById("formElement"),r=new FormData(e),o=new FormData,s=document.querySelector("input[type='file']");o.append("file",s.files[0]),a(o),r.append("idusuario",""),r.append("mov_usu","N"),r.delete("confirmPassword"),r.delete("addFiles"),r.delete("day"),r.delete("month"),r.delete("year"),t(r).then((function(){n.push("/login")}))},validate:T},(function(e){var t=e.resetForm,a=e.isValid,n=e.dirty;return r.a.createElement(h.c,{className:"form",id:"formElement"},r.a.createElement("h3",{className:"section-text"},"Datos del Emprendedor"),I.map((function(e,t){return r.a.createElement(h.b,Object.assign({key:t,type:e.type,name:e.name,label:e.label},e,{component:j}))})),r.a.createElement("h3",{className:"section-text"},"Datos de acceso"),F.map((function(e,t){return r.a.createElement(h.b,{key:t,type:e.type,name:e.name,label:e.label,component:j})})),r.a.createElement("span",{className:"form-label"},r.a.createElement(h.b,{type:"checkbox",name:"termns"}),"Autorizo y Acepto que la Municipalidad de La Molina me notifique los actos administrativos que pudiera emitir a consecuencia de la presente solicitud y/0 procedimiento administrativo al correo electr\xf3nico."),r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{className:"btn background-red",type:"button",onClick:function(){return t(w)}},"Cancelar"),r.a.createElement("button",{className:"btn background-green",disabled:!n||!a,type:"submit"},"Enviar")))})))})),x={fetchUserLogin:function(e){return function(t){return t({type:"USER_LOGIN_REQUEST"}),fetch("https://moliemprendedor.munimolina.gob.pe/adm_login_usuario1.php",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"USER_LOGIN_SUCCESS",response:Object(p.a)({},e)}}(e))})).catch((function(e){t(function(e){return Object(p.a)({type:"USER_LOGIN_FAILURE"},e)}(e.message))}))}}},k=Object(l.b)((function(e){return e}),x)((function(e){var t=e.fetchUserLogin,a=e.history;return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h2",{className:"title"},"Mi cuenta"),r.a.createElement("h3",{className:"subtitle"},"Ingresa con tu cuenta para hacer uso de la Plataforma Digital MoliEmprendedor.")),r.a.createElement(h.d,{initialValues:P,onSubmit:function(e,n){!function(e,n){var r=document.getElementById("formLogin"),o=new FormData(r);t(o).then((function(e){e.response&&e.response[0]&&e.response[0].COD_MENSAJE?n.setErrors({general:e.response[0].COD_MENSAJE}):a.push("/account")}))}(0,n)},validate:A},(function(e){var t=e.errors,a=e.isValid,n=(e.isSubmitting,e.dirty);return r.a.createElement(h.c,{className:"form",id:"formLogin"},L.map((function(e,t){return r.a.createElement(h.b,{key:t,type:e.type,name:e.name,label:e.label,component:j})})),t.general&&r.a.createElement("p",{className:"message"},t.general),r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{className:"btn background-green",disabled:!n||!a,type:"submit"},"Ingresar")))})))})),q=[{Header:"IDUSUARIO",accessor:"IDUSUARIO"},{Header:"NOMBRE",accessor:"NOMBRE"},{Header:"APELLIDO PATERNO",accessor:"PATERNO"},{Header:"APELLIDO MATERNO",accessor:"MATERNO"},{Header:"DNI",accessor:"DNI"},{Header:"FECHANAC",accessor:"FECHANAC"},{Header:"CORREO",accessor:"CORREO"},{Header:"CELULAR",accessor:"CELULAR"}],H=a(50),M=function(e){var t=e.columns,a=e.data,n=Object(H.useTable)({columns:t,data:a},H.useSortBy),o=n.getTableProps,s=n.getTableBodyProps,c=n.headerGroups,i=n.rows,l=n.prepareRow;return r.a.createElement("table",o(),r.a.createElement("thead",null,c.map((function(e){return r.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return r.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"))})))}))),r.a.createElement("tbody",s(),i.map((function(e,t){return l(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return r.a.createElement("td",e.getCellProps(),e.render("Cell"))})))}))))},B={fetchGetUsers:function(e){return function(t){return t({type:"GET_USERS_REQUEST"}),fetch("https://moliemprendedor.munimolina.gob.pe/consulta_usuarios_registrados1.php",{method:"GET",body:e}).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"GET_USERS_SUCCESS",response:e}}(e))})).catch((function(e){t(function(e){return Object(p.a)({type:"GET_USERS_FAILURE"},e)}(e.message))}))}}},V=Object(l.b)((function(e){return{loginResponse:e.user.loginResponse,listUsers:e.user.listUsers}}),B)((function(e){var t=e.loginResponse,a=e.history,n=e.fetchGetUsers,o=e.listUsers;return r.a.useEffect((function(){t?n():a.push("/login")}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h2",{className:"title"},t&&t[0].NOMBRE)),o&&r.a.createElement(M,{data:o,columns:q}))}));var Q=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(l.a,{store:g},r.a.createElement(c.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:D}),r.a.createElement(i.a,{path:"/login",component:k}),r.a.createElement(i.a,{path:"/account",component:V})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,a){e.exports=a(177)},79:function(e,t,a){},83:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.f107e052.chunk.js.map